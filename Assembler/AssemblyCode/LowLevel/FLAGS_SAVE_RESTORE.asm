; Set register D to "00000100"
SET A, "0000"
SET B, "0100"
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
OR
MOV_ALU_OUT D

; Set register E to "00000100"
SET A, "0000"
SET B, "0100"
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
OR
MOV_ALU_OUT E

; Perform a "SUB D, E" operation
MOV_ALU_IN A, E
NOT
MOV_ALU_C_TO_AB A
SET B, "0001"
ADD
MOV_ALU_C_TO_AB B
MOV_ALU_IN A, D
ADD
MOV_ALU_OUT D

; Save the flags
SAVE_FLAGS

; Set register D to "00000100"
SET A, "0000"
SET B, "0100"
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
OR
MOV_ALU_OUT D

; Set register E to "00000001"
SET A, "0000"
SET B, "0001"
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
SHL
MOV_ALU_C_TO_AB A
OR
MOV_ALU_OUT E

; Perform a "SUB D, E" operation
MOV_ALU_IN A, E
NOT
MOV_ALU_C_TO_AB A
SET B, "0001"
ADD
MOV_ALU_C_TO_AB B
MOV_ALU_IN A, D
ADD
MOV_ALU_OUT D

; Restore the flags
RESTORE_FLAGS

HLT